<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>SayphKey</title>

  <!-- PWA assets under /sayphkey/ -->
  <link rel="icon" type="image/png" sizes="32x32" href="/sayphkey/icon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/sayphkey/icon-16x16.png">
  <link rel="apple-touch-icon" href="/sayphkey/icon-180x180.png">
  <link rel="manifest" href="/sayphkey/manifest.json">
  <meta name="theme-color" content="#22c55e">

  <!-- CSP: block outbound; allow SW + manifest -->
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'none';
    img-src 'self' data:;
    style-src 'unsafe-inline';
    script-src 'unsafe-inline';
    worker-src 'self';
    manifest-src 'self';
    connect-src 'none';
    base-uri 'none';
    form-action 'none'
  ">

  <style>
    :root{ --line:#111; --green:#22c55e }
    *{ box-sizing:border-box }
    body{ margin:0; background:#F8FAFC; color:#111; font:14px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif }
    .wrap{ max-width:900px; margin:24px auto; padding:20px }
    .card{ background:#fff; border:1px solid #ddd; border-radius:12px; padding:20px; box-shadow:0 1px 2px rgba(0,0,0,.04) }

    .header{ display:flex; justify-content:space-between; align-items:center; gap:16px; flex-wrap:wrap }
    .logo-wrap{ display:flex; align-items:center; gap:12px }
    .logo-wrap svg{ display:block; max-width:280px; height:auto }

    .tagline { font-style: italic; font-size: 14px; color: #444; text-align:center; margin: 6px auto 0; max-width: 680px }

    .net{ font-size:12px; padding:8px 14px; border-radius:999px; border:1px solid #2e6f2e; background:#2e6f2e; color:#fff; font-family:'Courier New', monospace }

    label{ font-weight:700; margin-top:10px; display:block; color:#5b6d55; font-family:'Courier New', monospace }
    input,textarea{ width:100%; padding:8px; border:2px solid var(--line); border-radius:4px; font:14px 'Courier New', monospace }
    textarea{ min-height:150px; resize:vertical }

    .mode-row {
  display: flex;
  gap: 16px;
  margin-top: 6px;
  flex-wrap: wrap;
  justify-content: center;  /* NEW — centers buttons */
}
    .io-grid{ display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-top:8px }
    @media (max-width:700px){ .io-grid{ grid-template-columns:1fr } }

    .center-line { text-align: center; margin-top: 8px; font-size: 14px; font-weight: bold; color: #5b6d55; font-family: 'Courier New', monospace }

    /* Quick Start (collapsible) */
    .quickstart{ margin:16px auto 0; max-width:900px }
    .quickstart .toggle-btn{ background:var(--green); color:#111; font-family:'Courier New', monospace; font-weight:250; padding:8px 14px; border:2px solid #14532d; border-radius:8px; cursor:pointer; box-shadow:0 1px 0 rgba(0,0,0,.06) }
    .qs-content{ display:none; margin-top:12px; padding:16px 20px; background:#f9fafb; border:1px solid #ddd; border-radius:8px; font-family:'Courier New', monospace; font-size:14px; line-height:1.5 }
    .qs-content h3{ margin:0 0 8px; font-size:18px; color:#111 }
    .qs-content .important{ color:#b91c1c; font-weight:700 }

    footer{ margin:18px auto 8px; max-width:900px; color:#64748b; font:12px 'Courier New', monospace; text-align:center }
    footer .muted{ opacity:.9 }

     .logo-wrap {
  font-family: 'Inter', Arial, sans-serif; /* Canva Sans → Inter fallback */
  font-size: 28px;
  font-weight: 600;
  text-align: center;
}

.logo-sayph {
  color: var(--green);  /* uses the same green as the Encrypt button */
}

.logo-key {
  color: #111;          /* black */
}
  </style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <div class="header">
      <div class="logo-wrap" id="logoSlot" aria-label="SayphKey">
  <span class="logo-sayph">Sayph</span><span class="logo-key">Key</span>
</div>
      <div id="net" class="net">Offline</div>
    </div>

    <div class="tagline">
      Simple, Safe, Stress‑free Solution for Securing Sensitive Information
    </div>

    
    <div class="center-line">
      Step 1: DISCONNECT INTERNET connection- GO OFFLINE 
    </div>
    
    <div class="center-line">
    <label>Step 2: Choose the Mode</label>
    <div class="mode-row">
      <button id="encBtn" class="mode-btn">Encrypt</button>
      <button id="decBtn" class="mode-btn">Decrypt</button>
    </div>

    <!-- Keyword only -->
    <div style="margin-top:10px">
      <label for="keyword">Step 3: Create a Keyword</label>
      <input id="keyword" type="text" placeholder="Create a keyword (A–Z only, no spaces/punctuation, 4+ letters recommended)">
    </div>

    <div class="io-grid">
      <div>
        <label for="inText">Step 4: Input Text</label>
        <textarea id="inText" placeholder="Enter seed phrases, passwords, etc. to be encrypted or decrypted (in required order)"></textarea>
      </div>
      <div>
        <label for="outText">Step 5: Encrypted or Decrypted Output</label>
        <textarea id="outText" readonly placeholder="Copy encrypted information to store elsewhere"></textarea>
      </div>
    </div>

    <div class="center-line">
      Step 6: DELETE all seed phrases, passwords, etc. BEFORE RECONNECTING to the internet.
    </div>
    <div class="center-line">
      Step 7: Secure your encrypted information and keyword SEPARATELY.
    </div>
  </div>
</div>

<!-- Collapsible Quick Start Section -->
<div align="center" class="quickstart">
  <button class="toggle-btn" onclick="toggleQuickstart()">Quick Start Steps</button>
  <div id="quickstartContent" class="qs-content">
    <h3>Quick Start Steps</h3>
    <ol>
      <li>Open this page once while online (to cache).</li>
      <li>Add to Home Screen (Safari iOS / Chrome Android).</li>
      <li>Disconnect from the internet.</li>
      <li>Choose Encrypt or Decrypt, set a Keyword, type in the Input box — output updates automatically.</li>
    </ol>
    <p class="important">Erase decrypted text before reconnecting to the internet.</p>
  </div>
</div>

<footer>
  SayphKey · v0.1.0 · <span id="netStatus">Offline</span><br>
  Created by Dr Daniel Faber —
  <a href="https://www.linkedin.com/in/drdanielfaber/" target="_blank">LinkedIn</a> · 
  <a href="mailto:drdanfab@gmail.com">EMAIL</a> · 
  <a href="https://github.com/drdanfab/sayphkey" target="_blank">View on GitHub</a><br>
  © 2025 SayphKey. All Rights Reserved. No warranties. Use at your own risk.
</footer>

<script>
(function(){
  // Online badge (file:// aware so local use looks normal)
  var netHeader = document.getElementById('net');
  var netFooter = document.getElementById('netStatus');
  function label(s){ if(netHeader) netHeader.textContent = s; if(netFooter) netFooter.textContent = s; }

  var isFile = location.protocol === 'file:';
  if (isFile) {
    label('Local file (no network needed)');
  } else {
    function updateNet(){ label(navigator.onLine ? 'Online' : 'Offline'); }
    window.addEventListener('online', updateNet);
    window.addEventListener('offline', updateNet);
    updateNet();
  }

  var ABC = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";

  var els = {
    keyword: document.getElementById('keyword'),
    inText: document.getElementById('inText'),
    outText: document.getElementById('outText'),
    encBtn: document.getElementById('encBtn'),
    decBtn: document.getElementById('decBtn')
  };

  // Mode toggle (always auto-run)
  var currentMode = 'enc';
  function setMode(mode){
    currentMode = mode;
    els.encBtn.classList.toggle('active', mode === 'enc');
    els.decBtn.classList.toggle('active', mode === 'dec');
    scheduleRun(); // auto-run on mode change
  }
  els.encBtn.addEventListener('click', function(){ setMode('enc'); });
  els.decBtn.addEventListener('click', function(){ setMode('dec'); });
  setMode('enc');

  // Helpers
  function dedupeKeyword(k){
    k = (k || "").toUpperCase().replace(/[^A-Z]/g,'');
    var out = "", seen = {};
    for (var i=0;i<k.length;i++){ var ch = k[i]; if (!seen[ch]){ seen[ch] = true; out += ch; } }
    return out;
  }
  function buildAlphabet(keyword){
    // Always insert keyword at the start
    var key = dedupeKeyword(keyword);
    var used = {};
    var alpha = "";
    for (var i=0;i<key.length;i++){ var ch = key[i]; if(!used[ch]){ used[ch]=true; alpha += ch; } }
    for (var j=0;j<26;j++){ var a = ABC[j]; if(!used[a]) alpha += a; }
    return alpha;
  }
  function makeMaps(alpha){
    var encU = {}, decU = {};
    for (var i=0;i<26;i++){ encU[ABC[i]] = alpha[i]; decU[alpha[i]] = ABC[i]; }
    return {
      encChar: function(ch){
        var code = ch.charCodeAt(0);
        var isLower = code >= 97 && code <= 122;
        var up = isLower ? String.fromCharCode(code - 32) : ch;
        if (encU[up]) { var m = encU[up]; return isLower ? m.toLowerCase() : m; }
        return ch;
      },
      decChar: function(ch){
        var code = ch.charCodeAt(0);
        var isLower = code >= 97 && code <= 122;
        var up = isLower ? String.fromCharCode(code - 32) : ch;
        if (decU[up]) { var m = decU[up]; return isLower ? m.toLowerCase() : m; }
        return ch;
      }
    };
  }

  function run(){
    var alpha = buildAlphabet(els.keyword.value);
    var maps = makeMaps(alpha);
    var txt = els.inText.value || "";
    var out = "";
    if (currentMode === 'enc'){ for (var i=0;i<txt.length;i++) out += maps.encChar(txt[i]); }
    else { for (var j=0;j<txt.length;j++) out += maps.decChar(txt[j]); }
    els.outText.value = out;
  }

  // Debounce for auto-run
  var t;
  function scheduleRun(){ clearTimeout(t); t = setTimeout(run, 120); }

  // Wire inputs to auto-run
  ['keyup','change','input'].forEach(function(evt){
    els.inText.addEventListener(evt, scheduleRun);
    els.keyword.addEventListener(evt, scheduleRun);
  });

  // Initial compute
  scheduleRun();
})();

function toggleQuickstart(){
  var qs = document.getElementById('quickstartContent');
  if (!qs) return;
  qs.style.display = (qs.style.display === 'block') ? 'none' : 'block';
}
</script>

<!-- Service Worker registration (root of new repo path) -->
<script>
(function(){
  if (!('serviceWorker' in navigator) || !window.isSecureContext) return;
  navigator.serviceWorker.register('/sayphkey/sw.js', { scope: '/sayphkey/' }).catch(function(){});
})();
</script>
</body>
</html>
