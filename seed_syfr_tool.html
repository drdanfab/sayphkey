<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Seed Syfr — Single File (Offline)</title>
<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src data:; style-src 'unsafe-inline'; script-src 'unsafe-inline'; base-uri 'none'; form-action 'none'">
<style>
:root{ --line:#111; --green:#22c55e; }
*{ box-sizing:border-box }
body{ margin:0; background:#F8FAFC; color:#111; font:14px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif }
.wrap{ max-width:900px; margin:24px auto; padding:20px }
.card{ background:#fff; border:1px solid #ddd; border-radius:12px; padding:20px; box-shadow:0 1px 2px rgba(0,0,0,.04) }

.header{ display:flex; justify-content:space-between; align-items:center; gap:16px }
.logo-wrap{ display:flex; align-items:center; gap:12px }
.logo-wrap svg, .logo-wrap img{ display:block; max-width:280px; height:auto }

.net{ font-size:12px; padding:8px 14px; border-radius:999px; border:1px solid #2e6f2e; background:#2e6f2e; color:#fff; font-family:"Courier New", Courier, monospace }

label{ font-weight:700; margin-top:10px; display:block; color:#5b6d55; font-family:"Courier New", Courier, monospace }
input,textarea{ width:100%; padding:8px; border:2px solid var(--line); border-radius:4px; font:14px "Courier New", Courier, monospace }
textarea{ min-height:150px; resize:vertical }

.mode-row{ display:flex; gap:16px; margin-top:6px; flex-wrap:wrap }
.mode-btn{ padding:16px 22px; border-radius:12px; border:2px solid #111; background:#fff; color:#111; box-shadow:0 2px 0 rgba(0,0,0,0.08); cursor:pointer }
.mode-btn.active{ background:var(--green); color:#111; border-color:#14532d }

.io-grid{ display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-top:8px }
@media (max-width:700px){ .io-grid{ grid-template-columns:1fr } }

.actions{ display:flex; align-items:center; gap:12px; margin-top:8px }
#runBtn{ width:120px; padding:10px 14px; border-radius:12px; border:2px solid var(--line); background:#fff; cursor:pointer; font-weight:700; font-family:"Courier New", Courier, monospace; color:#111 }
#runBtn:hover{ filter:brightness(0.97) }

footer{ margin:18px auto 8px; max-width:900px; color:#64748b; font:12px "Courier New", monospace; text-align:center }
footer .muted{ opacity:.9 }
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <div class="header">
     <div class="logo-wrap" id="logoSlot">
   <header>
    <!-- Your logo -->
    <img src="Seed Syfr Logo.svg" alt="Seed Syfr Logo" class="logo" />
  </header>
</div>

      <div id="net" class="net">Offline</div>
    </div>

    <label>Mode</label>
    <div class="mode-row">
      <button id="encBtn" class="mode-btn">Encrypt</button>
      <button id="decBtn" class="mode-btn">Decrypt</button>
    </div>

    <div style="display:grid;grid-template-columns:1fr 200px;gap:16px;margin-top:10px">
      <div>
        <label for="keyword">Keyword</label>
        <input id="keyword" type="text" placeholder="e.g., FISH">
      </div>
      <div>
        <label for="pos">Insert Position (1–26)</label>
        <input id="pos" type="number" min="1" max="26" value="1">
      </div>
    </div>

    <div class="io-grid">
      <div>
        <label for="inText">Input Text</label>
        <textarea id="inText"></textarea>
      </div>
      <div>
        <label for="outText">Output Text</label>
        <textarea id="outText" readonly></textarea>
      </div>
    </div>

    <div class="actions">
      <button id="runBtn">Run</button>
      <label style="display:inline-flex;align-items:center;gap:8px;">
        <input type="checkbox" id="autoRunChk" checked> Auto-run
      </label>
    </div>
  </div>
</div>

<footer>
  Seed Syfr · v0.1.0 · <span id="netStatus">Offline</span><br>
  <span class="muted">For sensitive use, prefer true air-gap workflows.</span>
</footer>

<script>
(function(){
  // Online badges
  var netHeader = document.getElementById('net');
  var netFooter = document.getElementById('netStatus');
  function updateNet(){ var s = navigator.onLine ? 'Online' : 'Offline'; if(netHeader) netHeader.textContent = s; if(netFooter) netFooter.textContent = s; }
  window.addEventListener('online', updateNet);
  window.addEventListener('offline', updateNet);
  updateNet();

  var ABC = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";

  var els = {
    keyword: document.getElementById('keyword'),
    pos: document.getElementById('pos'),
    inText: document.getElementById('inText'),
    outText: document.getElementById('outText'),
    runBtn: document.getElementById('runBtn'),
    encBtn: document.getElementById('encBtn'),
    decBtn: document.getElementById('decBtn'),
    autoRunChk: document.getElementById('autoRunChk')
  };

  // Mode toggle
  var currentMode = 'enc';
  function setMode(mode){
    currentMode = mode;
    els.encBtn.classList.toggle('active', mode === 'enc');
    els.decBtn.classList.toggle('active', mode === 'dec');
    if (els.autoRunChk.checked) scheduleRun();
  }
  els.encBtn.addEventListener('click', function(){ setMode('enc'); });
  els.decBtn.addEventListener('click', function(){ setMode('dec'); });
  setMode('enc');

  // Cipher helpers
  function dedupeKeyword(k){
    k = (k || "").toUpperCase().replace(/[^A-Z]/g,'');
    var out = "", seen = {};
    for (var i=0;i<k.length;i++){ var ch = k[i]; if (!seen[ch]){ seen[ch] = true; out += ch; } }
    return out;
  }
  function buildAlphabet(keyword, insertPos){
    var key = dedupeKeyword(keyword);
    var rem = [];
    for (var i=0;i<26;i++){ var ch = ABC[i]; if (key.indexOf(ch) === -1) rem.push(ch); }
    var pos = parseInt(insertPos,10);
    if (!isFinite(pos) || pos < 1) pos = 1;
    if (pos > rem.length + 1) pos = rem.length + 1;
    var left = rem.slice(0, pos-1).join('');
    var right = rem.slice(pos-1).join('');
    var alpha = left + key + right;
    if (alpha.length !== 26) {
      var used = {}; for (var j=0;j<alpha.length;j++) used[alpha[j]] = true;
      for (var k2=0;k2<26;k2++){ var a = ABC[k2]; if(!used[a]) alpha += a; }
    }
    return alpha;
  }
  function makeMaps(alpha){
    var encU = {}, decU = {};
    for (var i=0;i<26;i++){ encU[ABC[i]] = alpha[i]; decU[alpha[i]] = ABC[i]; }
    return {
      encChar: function(ch){
        var code = ch.charCodeAt(0);
        var isLower = code >= 97 && code <= 122;
        var up = isLower ? String.fromCharCode(code - 32) : ch;
        if (encU[up]) { var m = encU[up]; return isLower ? m.toLowerCase() : m; }
        return ch;
      },
      decChar: function(ch){
        var code = ch.charCodeAt(0);
        var isLower = code >= 97 && code <= 122;
        var up = isLower ? String.fromCharCode(code - 32) : ch;
        if (decU[up]) { var m = decU[up]; return isLower ? m.toLowerCase() : m; }
        return ch;
      }
    };
  }

  function run(){
    var alpha = buildAlphabet(els.keyword.value, els.pos.value);
    var maps = makeMaps(alpha);
    var txt = els.inText.value || "";
    var out = "";
    if (currentMode === 'enc'){ for (var i=0;i<txt.length;i++) out += maps.encChar(txt[i]); }
    else { for (var j=0;j<txt.length;j++) out += maps.decChar(txt[j]); }
    els.outText.value = out;
  }

  // Debounce for auto-run
  var t;
  function scheduleRun(){ clearTimeout(t); t = setTimeout(run, 180); }

  // Persist auto-run toggle
  var autoKey = 'seedSyfr:autoRun';
  var saved = null; try { saved = localStorage.getItem(autoKey); } catch(e){}
  if (saved !== null) els.autoRunChk.checked = (saved === '1');
  els.autoRunChk.addEventListener('change', function(){
    try { localStorage.setItem(autoKey, els.autoRunChk.checked ? '1' : '0'); } catch(e){}
    if (els.autoRunChk.checked) scheduleRun();
  });

  // Wire inputs
  ['keyup','change'].forEach(function(evt){
    els.inText.addEventListener(evt, function(){ if (els.autoRunChk.checked) scheduleRun(); });
    els.keyword.addEventListener(evt, function(){ if (els.autoRunChk.checked) scheduleRun(); });
    els.pos.addEventListener(evt, function(){ if (els.autoRunChk.checked) scheduleRun(); });
  });

  // Run button
  els.runBtn.addEventListener('click', run);

  // Initial compute if auto-run on
  if (els.autoRunChk.checked) scheduleRun();
})();
</script>
</body>
</html>
